========================================
MYSQL DEPLOYMENT GUIDE - SHARED CPANEL
========================================

‚úÖ ‡¶è‡¶á version MySQL database ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!

STEP 1: CREATE MYSQL DATABASE
------------------------------
cPanel ‚Üí Databases ‚Üí MySQL Databases

1. Create Database:
   - Database Name: yourname_socialads (example)
   - Click "Create Database"

2. Create User:
   - Username: yourname_admin (example)
   - Password: Generate strong password
   - Click "Create User"

3. Add User to Database:
   - Select your user
   - Select your database
   - Click "Add"
   - Check "ALL PRIVILEGES"
   - Click "Make Changes"

4. Note your credentials:
   Database Name: yourname_socialads
   Username: yourname_admin
   Password: [your password]
   Host: localhost

STEP 2: UPLOAD FILES
--------------------
1. ZIP this entire 'cpanel-deploy' folder
2. cPanel ‚Üí File Manager ‚Üí Upload ZIP
3. Extract in a folder (NOT in public_html)
   Example: ~/crm-app

STEP 3: CREATE NODE.JS APP
---------------------------
cPanel ‚Üí Software ‚Üí Setup Node.js App ‚Üí Create Application

Settings:
- Node.js Version: 18.x or 20.x (‚ö†Ô∏è NOT 22.x - use 18 or 20!)
- Application Mode: Production
- Application Root: crm-app (your folder name)
- Application URL: your-domain.com
- Application Startup File: server.cjs (‚ö†Ô∏è NOT index.js!)

Click "Create"

‚ö†Ô∏è IMPORTANT: 
- Use Node 18.x or 20.x for best compatibility!
- Use server.cjs as startup file (fixes ESM compatibility)

STEP 4: ENVIRONMENT VARIABLES (VERY IMPORTANT!)
-----------------------------------------------
In the same page, add these variables ONE BY ONE:

Variable 1:
Key: DATABASE_URL
Value: mysql://yourname_admin:yourpassword@localhost:3306/yourname_socialads

Variable 2:
Key: NODE_ENV
Value: production

Variable 3:
Key: PORT
Value: 5000

Variable 4:
Key: SESSION_SECRET
Value: generate-random-32-character-string

‚ö†Ô∏è CRITICAL: 
- NODE_ENV=production is MANDATORY (without this app won't work!)
- Replace yourname_admin, yourpassword, yourname_socialads with actual values
- SESSION_SECRET should be a random 32+ character string

Save/Update after adding ALL variables

STEP 5: INSTALL DEPENDENCIES
-----------------------------
‚ö†Ô∏è VERY IMPORTANT STEP - DO NOT SKIP!

1. Click "Run NPM Install" button
2. ‚è≥ Wait 10-20 minutes (‡¶è‡¶ü‡¶æ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶®‡ßá‡¶Ø‡¶º!)
3. Page refresh ‡¶ï‡¶∞‡ßá status check ‡¶ï‡¶∞‡ßÅ‡¶®
4. ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® "npm install completed" ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ö‡ßç‡¶õ‡ßá

‚úÖ All packages including mysql2 will be installed

‚ö†Ô∏è Common Mistake:
- Restart ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá npm install ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®!
- ‡¶Ø‡¶¶‡¶ø mysql2 error ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®, FIX-MYSQL2-ERROR.txt ‡¶™‡¶°‡¶º‡ßÅ‡¶®

STEP 6: SETUP DATABASE
-----------------------
Method 1 - Using temporary startup (RECOMMENDED):

1. Change Application Startup File to: setup-database.js
2. Click "Restart"
3. Wait 30 seconds
4. Check logs - should see "Database setup completed"
5. Change back to: index.js
6. Click "Restart" again

Method 2 - Using phpMyAdmin:

1. cPanel ‚Üí phpMyAdmin
2. Select your database
3. Click "SQL" tab
4. Copy and paste this query:

CREATE TABLE IF NOT EXISTS admin_users (
  id VARCHAR(36) PRIMARY KEY,
  username TEXT NOT NULL,
  password TEXT NOT NULL,
  full_name TEXT NOT NULL,
  email TEXT,
  is_active BOOLEAN NOT NULL DEFAULT TRUE,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO admin_users (id, username, password, full_name)
VALUES (
  UUID(),
  'admin',
  '$2a$10$YourHashedPasswordHere',
  'Administrator'
);

(Use bcrypt to hash 'admin123' password)

STEP 7: START APPLICATION
--------------------------
In Setup Node.js App page:
- Ensure Application Startup File is: server.cjs (NOT index.js!)
- Click "Restart" button
- Wait for status to show "Running"

‚ö†Ô∏è IMPORTANT: Use server.cjs to avoid ES Module errors!

STEP 8: TEST
------------
Visit: https://your-domain.com
Login: admin / admin123
‚ö†Ô∏è Change password after first login!

========================================
TROUBLESHOOTING
========================================

‚ùå "Cannot find package vite" (VERY COMMON!)
‚Üí Read FIX-VITE-ERROR.txt file
‚Üí Set NODE_ENV=production in environment variables
‚Üí This is MANDATORY for production!
‚Üí Restart application

‚ùå "ERR_REQUIRE_ESM" - ES Module Error
‚Üí Read FIX-ESM-ERROR.txt file
‚Üí Change startup file to: server.cjs (NOT index.js)
‚Üí Restart application
‚Üí This fixes CommonJS/ESM compatibility

‚ùå "Cannot find package mysql2"
‚Üí Read FIX-MYSQL2-ERROR.txt file
‚Üí Delete node_modules folder
‚Üí Run NPM Install again (wait 15+ minutes!)
‚Üí Use Node 18.x instead of 22.x
‚Üí Verify mysql2 folder exists in node_modules

‚ùå "Cannot connect to database"
‚Üí Check DATABASE_URL format
‚Üí Verify MySQL credentials
‚Üí Ensure database exists

‚ùå App won't start
‚Üí Check error logs in cPanel Node.js App page
‚Üí Verify all environment variables set
‚Üí Make sure npm install completed
‚Üí Run setup-database.js first

‚ùå NPM Install fails or takes too long
‚Üí Be patient! It can take 15-20 minutes
‚Üí Try Node version 18.x (most stable)
‚Üí Clear browser cache and try again
‚Üí Contact hosting support if still fails

========================================
MYSQL CONNECTION STRING FORMAT
========================================

mysql://username:password@host:port/database

Example:
mysql://myuser:mypass@localhost:3306/mydb

‚ö†Ô∏è Common Mistakes:
- Missing port :3306
- Wrong database name
- Special characters in password not URL-encoded
- Using @ symbol in password (must encode as %40)

========================================
NEXT STEPS AFTER DEPLOYMENT
========================================

1. ‚úÖ Login and change admin password
2. ‚úÖ Configure company settings
3. ‚úÖ Add your first client
4. ‚úÖ Test all features
5. ‚úÖ Setup regular database backups

========================================
SUCCESS!
========================================

Your Social Ads Expert CRM is now running on MySQL! üéâ

Features Available:
‚úÖ Client Management
‚úÖ Financial Tracking
‚úÖ Invoice Generation
‚úÖ Project Management
‚úÖ Employee Management
‚úÖ Website Credentials Storage
‚úÖ PDF Download
‚úÖ And much more!

Enjoy! üöÄ
